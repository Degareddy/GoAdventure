<div class="large-form">
  <div class="container mx-auto p-1 bg-blue-400 shadow-md rounded">
    <div class="flex justify-between items-center mb-1 h-8">
      <div class="flex items-center text-white">
        <mat-icon class="mr-1">receipt</mat-icon>
        <b>Booking Entry</b>
      </div>
      <div class="flex items-end space-x-1">
        <button mat-raised-button color="accent" class="btnUp" type="button">
          <mat-icon>cloud_upload</mat-icon> Docs
        </button>
        <!-- (click)="openInvoiceEditor()" mat-raised-button color="accent" -->
        <button mat-raised-button color="primary" class="btnUp" type="button" (click)="downloadPDF()">
          <mat-icon>picture_as_pdf</mat-icon> PDF
        </button>
  
        <button mat-raised-button class="btnUp" type="button" >
          <mat-icon>note_add</mat-icon> Notes
        </button>
        <button mat-raised-button color="accent" class="btnUp" type="button" (click)="onHelpCilcked()">
          <mat-icon>help</mat-icon> Help
        </button>
      </div>
    </div>
  </div>
  
  <div class="container mx-auto p-2 bg-gray-100 rounded-sm">

    <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()" #frmClear="ngForm">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
           
        <div class="bg-white p-2 border rounded-lg shadow-md">
            <div class="text-center text-gray-800 font-semibold">Client Details</div>
            
              <mat-label></mat-label>
            <div class="matfield">
            <mat-form-field appearance="outline" style="width: 99%;">
                <mat-label fontsize="large">Client Name</mat-label>
                <input matInput type="text" placeholder="Client Name" formControlName="clientName"
                 >
                <button matSuffix mat-icon-button aria-label="Clear"  *ngIf="bookingForm.get('clientName')?.value"
                tabindex="-1" 
                (click)="bookingForm.get('clientName')?.reset()"
                   type="button">
                  <mat-icon class="mat-clear-icon">clear</mat-icon>
                </button>
              </mat-form-field>
            </div>
            <div class="matfield">
                <mat-form-field appearance="outline" style="width: 99%;">
                    <mat-label>Contact</mat-label>
                    <input matInput type="text" placeholder="Contact No" formControlName="contact"
                     >
                    <button matSuffix mat-icon-button aria-label="Clear"  *ngIf="bookingForm.get('contact')?.value"
                    tabindex="-1" 
                    (click)="bookingForm.get('contact')?.reset()"
                       type="button">
                      <mat-icon class="mat-clear-icon">clear</mat-icon>
                    </button>
                  </mat-form-field>
                </div>
                <div class="matfield">
                    <mat-form-field appearance="outline" style="width: 99%;">
                        <mat-label>Email</mat-label>
                        <input matInput type="text" placeholder="Email" formControlName="email" 
                         >
                        <button matSuffix mat-icon-button aria-label="Clear" *ngIf="bookingForm.get('email')?.value"
                        tabindex="-1" 
                        (click)="bookingForm.get('email')?.reset()"
                           type="button">
                          <mat-icon class="mat-clear-icon">clear</mat-icon>
                        </button>
                      </mat-form-field>
                    </div>
                    <div class="matfield">
                        <mat-form-field appearance="outline" style="width: 99%;">
                            <mat-label>Adults</mat-label>
                            <input matInput type="number" placeholder="Adults" formControlName="adults"
                             >
                            <button matSuffix mat-icon-button aria-label="Clear" *ngIf="bookingForm.get('adults')?.value"
                            tabindex="-1" 
                            (click)="bookingForm.get('adults')?.reset()"
                               type="button">
                              <mat-icon class="mat-clear-icon">clear</mat-icon>
                            </button>
                          </mat-form-field>
                        </div>
                        <div class="matfield">
                            <mat-form-field appearance="outline" style="width: 99%;">
                                <mat-label>0-5</mat-label>
                                <input matInput type="number" placeholder="0 - 5" formControlName="zeroToFive"
                                 >
                                <button matSuffix mat-icon-button aria-label="Clear" *ngIf="bookingForm.get('zeroToFive')?.value"
                                tabindex="-1" 
                                (click)="bookingForm.get('zeroToFive')?.reset()"
                                   type="button">
                                  <mat-icon class="mat-clear-icon">clear</mat-icon>
                                </button>
                              </mat-form-field>
                            </div>
                            <div class="matfield">
                                <mat-form-field appearance="outline" style="width: 99%;">
                                    <mat-label>5 - 12</mat-label>
                                    <input matInput type="number" placeholder="5 - 12" formControlName="fiveToTwelve"
                                     >
                                    <button matSuffix mat-icon-button aria-label="Clear"  *ngIf="bookingForm.get('fiveToTwelve')?.value"
                                    tabindex="-1" 
                                    (click)="bookingForm.get('fiveToTwelve')?.reset()"
                                       type="button">
                                      <mat-icon class="mat-clear-icon">clear</mat-icon>
                                    </button>
                                  </mat-form-field>
                                </div>
                                
                            
                        
                    
                          
        </div>
        <div class="bg-white p-2 border rounded-lg shadow-md">
            <div class="text-center text-gray-800 font-semibold">Package Details</div>
            <div class="text-center text-gray-800 font-semibold">                  <mat-label></mat-label>
            </div>
            <div appearance="outline" class="w-full mt-2">
            <mat-form-field appearance="outline" class="w-full mt-2">
              <mat-label>Mode</mat-label>
              <mat-select formControlName="mode" (selectionChange)="modeChange()">
                <mat-option value="">--Select--</mat-option>
                <mat-option *ngFor="let x of modes" [value]="x.itemCode">{{ x.itemName }}</mat-option>
              </mat-select>
            </mat-form-field>
            <div class="matfield">
            <mat-form-field appearance="outline" style="width: 99%;">
                <mat-label>Booking No</mat-label>
                <input matInput type="text" placeholder="Booking No" formControlName="batchNo" [disabled]="bookingForm.get('mode')?.value === 'Add'"
                 >
                <button matSuffix mat-icon-button aria-label="Clear" *ngIf="bookingForm.get('batchNo')?.value"
                tabindex="-1" 
                (click)="bookingForm.get('batchNo')?.reset()"
                   type="button">
                  <mat-icon class="mat-clear-icon">clear</mat-icon>
                </button>
                <button matSuffix mat-icon-button aria-label="Search" 
                  (click)="onBookingSearch()" type="button">
                  <mat-icon class="mat-search-icon">search</mat-icon>
                </button>
              </mat-form-field>
            </div>
            <div class="matfield">
                <mat-form-field appearance="outline" style="width: 99%;">
                    <mat-label>Trip Id</mat-label>
                    <input matInput type="text" placeholder="Batch Code" formControlName="tripId"
                     >
                    <button matSuffix mat-icon-button aria-label="Clear" *ngIf="bookingForm.get('tripId')?.value"
                    tabindex="-1" 
                    (click)="bookingForm.get('tripId')?.reset()"
                       type="button">
                      <mat-icon class="mat-clear-icon">clear</mat-icon>
                    </button>
                    <button matSuffix mat-icon-button aria-label="Search" 
                      (click)="onSearchCilcked()" type="button">
                      <mat-icon class="mat-search-icon">search</mat-icon>
                    </button>
                  </mat-form-field>
                </div>
                <div class="matfield">
                    <mat-form-field appearance="outline" style="width: 99%;">
                        <mat-label>Package Name</mat-label>
                        <input matInput type="text" placeholder="Package Name" formControlName="packageName"
                         >
                        <button matSuffix mat-icon-button aria-label="Clear" *ngIf="bookingForm.get('packageName')?.value"
                        tabindex="-1" 
                        (click)="bookingForm.get('packageName')?.reset()"
                           type="button">
                          <mat-icon class="mat-clear-icon">clear</mat-icon>
                        </button>
                        <button matSuffix mat-icon-button aria-label="Search" 
                          (click)="onSearchCilcked()" type="button">
                          <mat-icon class="mat-search-icon">search</mat-icon>
                        </button>
                      </mat-form-field>
                    </div>
                    <div class="matfield">
                      <mat-form-field appearance="outline" class="w-full mt-2">
                        <mat-label>Package Type</mat-label>
                        <mat-select formControlName="packageType" >
                          <mat-option value="">--Select--</mat-option>
                          <mat-option *ngFor="let x of packageTypes" [value]="x.itemCode">{{ x.itemName }}</mat-option>
                        </mat-select>
                      </mat-form-field>
                        </div>
                        <div class="matfield">  
                          <mat-form-field appearance="outline" class="mat-mode">
                            <mat-label class="mat-label-class">Tran Date</mat-label>
                            <input matInput [matDatepicker]="picker" formControlName="tranDate" />
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                          </mat-form-field>
                        </div>
              
        </div>
    </div> 
        <div class="bg-white p-2 border rounded-lg shadow-md">
            <div class="text-center text-gray-800 font-semibold">Pricing</div>
              <mat-label></mat-label>
            <div class="matfield">
            <mat-form-field appearance="outline" style="width: 99%;">
                <mat-label>Regular Amount</mat-label>
                <input matInput type="number" placeholder="Regular Amount" formControlName="regularAmount"
                 >
                <button matSuffix mat-icon-button aria-label="Clear" *ngIf="bookingForm.get('regularAmount')?.value"
                tabindex="-1" 
                (click)="bookingForm.get('regularAmount')?.reset()"
                   type="button">
                  <mat-icon class="mat-clear-icon">clear</mat-icon>
                </button>
              </mat-form-field>
            </div>
            <div class="matfield">
                <mat-form-field appearance="outline" style="width: 99%;">
                    <mat-label>Discount Offered</mat-label>
                    <input matInput type="text" placeholder="Discount Offered" formControlName="discOffered"
                     >
                    <button matSuffix mat-icon-button aria-label="Clear"  *ngIf="bookingForm.get('discOffered')?.value"
                    tabindex="-1" 
                    (click)="bookingForm.get('discOffered')?.reset()"
                       type="button">
                      <mat-icon class="mat-clear-icon">clear</mat-icon>
                    </button>
                  </mat-form-field>
                </div>
                <div class="matfield">
                    <mat-form-field appearance="outline" style="width: 99%;">
                        <mat-label>Quoted Price</mat-label>
                        <input matInput type="number" placeholder="Quoted Price" formControlName="quotedPrice"
                         >
                        <button matSuffix mat-icon-button *ngIf="bookingForm.get('quotedPrice')?.value"
                        tabindex="-1" 
                        (click)="bookingForm.get('quotedPrice')?.reset()"
                        aria-label="Clear"  
                           type="button">
                          <mat-icon class="mat-clear-icon">clear</mat-icon>
                        </button>
                      </mat-form-field>
                    </div>
                    <div class="matfield">
                        <mat-form-field appearance="outline" style="width: 99%;">
                            <mat-label>Add-Ons</mat-label>
                            <input matInput type="number" placeholder="Add Ons" formControlName="addOns" 
                             >
                            <button matSuffix mat-icon-button aria-label="Clear"  *ngIf="bookingForm.get('addOns')?.value"
                            tabindex="-1" 
                            (click)="bookingForm.get('addOns')?.reset()"
                               type="button">
                              <mat-icon class="mat-clear-icon">clear</mat-icon>
                            </button>
                          </mat-form-field>
                           <mat-form-field appearance="outline" class="w-full mt-2">
              <mat-label>Lead Source</mat-label>
              <mat-select formControlName="leadsource" >
                <mat-option value="">--Select--</mat-option>
                <mat-option *ngFor="let x of leadsources" [value]="x.itemCode">{{ x.itemName }}</mat-option>
              </mat-select>
            </mat-form-field>
             <mat-form-field appearance="outline" class="w-full mt-2">
              <mat-label>Departure Type</mat-label>
              <mat-select formControlName="departuretype" >
                <mat-option value="">--Select--</mat-option>
                <mat-option *ngFor="let x of departuretypes" [value]="x.itemCode">{{ x.itemName }}</mat-option>
              </mat-select>
            </mat-form-field>
                        </div> 

                        <div class="row justify-content-center mb-3 align-items-center">
                            <div class="col-3 d-flex align-items-center">
                              <label class="me-2">GST:</label>
                              <mat-checkbox formControlName="gstYes" class="me-2">Yes</mat-checkbox>
                              <mat-checkbox formControlName="gstNo" [checked]="!bookingForm.get('gstYes')?.value" (change)="bookingForm.get('gstYes')?.setValue(false)">No</mat-checkbox>
                            </div>
                          </div>
        </div>
        
    </div> 
    <div class="row">
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Remarks</mat-label>
            <input matInput placeholder="Remarks" formControlName="remarks" type="text">
          </mat-form-field>
        </div>
      </div>
      <app-message-box [msg]="retMessage" [classtype]="textMessageClass"></app-message-box>
      <div class="flex justify-center mt-0.1">
        <button mat-raised-button color="primary" class="btnUp" type="submit" [disabled]="!bookingForm.valid"
          >
          <mat-icon>done</mat-icon> Apply
        </button>
        <button mat-raised-button color="accent" class="btnUp" type="button" (click)="clear()">
          <mat-icon>clear_all</mat-icon> Clear
        </button>
        <!-- <button mat-raised-button color="accent" class="btnUp" type="button" (click)="goBack()">
        <mat-icon>arrow_back_ios</mat-icon>go back  </button> -->
        <button mat-raised-button color="warn" class="btnUp" type="button" (click)="close()">
          <mat-icon>cancel</mat-icon> Close
        </button>
      </div>
    </form>
  </div>
  
  </div>

<app-booking-chatbot 
  [bookingForm]="bookingForm"
  (formUpdated)="onChatbotFormUpdate($event)">
</app-booking-chatbot>